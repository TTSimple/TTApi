<?php

namespace Library\Component;

use Phalcon\Di as PhalconDi;

class Di extends PhalconDi
{
    /*
     * 借以实现IOC注入
     */
    private $phalconAppDi;
    protected static $instance;
    static function getInstance(){
        if(!isset(self::$instance)){
            self::$instance = new static();
        }
        return self::$instance;
    }

    public function setPhalconAppDi(PhalconDi $phalconAppDi){
        if ($this->phalconAppDi){
            return $this->phalconAppDi;
        }
        $this->phalconAppDi = $phalconAppDi;
        return $this;
    }

    public function getPhalconAppDi(){
        return $this->phalconAppDi;
    }

    public function get($name, $parameters = null)
    {
        try{
            $di = parent::get($name, $parameters);
        } catch (\Exception $e) {
            $di = false;
        }
        return $di;
    }

    public function set($name, $definition, $shared = false)
    {
        return parent::set($name, $definition, $shared);
    }

    public function setRaw($name, \Phalcon\Di\ServiceInterface $rawDefinition)
    {
        parent::setRaw($name, $rawDefinition); // TODO: Change the autogenerated stub
    }

    public function getRaw($name)
    {
        parent::getRaw($name); // TODO: Change the autogenerated stub
    }

    public function getServices()
    {
        return parent::getServices(); // TODO: Change the autogenerated stub
    }
}